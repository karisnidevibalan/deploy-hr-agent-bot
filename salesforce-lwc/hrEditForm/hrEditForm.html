<template>
    <div class="edit-form-modal">
        <h4>{formTitle}</h4>

        <!-- Leave Type (only for Leave requests) -->
        <template if:false={isWfh}>
            <label>Leave Type</label>
            <lightning-combobox name="leaveType" value={leaveType} placeholder="Select Leave Type"
                options={leaveTypeOptions} onchange={handleLeaveTypeChange} class="form-field">
            </lightning-combobox>
        </template>

        <!-- Date Range -->
        <div class="date-row">
            <div class="date-field">
                <label>Start Date</label>
                <lightning-input type="date" value={startDate} onchange={handleStartDateChange} class="form-field">
                </lightning-input>
            </div>
            <div class="date-field">
                <label>End Date</label>
                <lightning-input type="date" value={endDate} onchange={handleEndDateChange} class="form-field">
                </lightning-input>
            </div>
        </div>

        <!-- Duration -->
        <div class="duration-row">
            <label>No. of Days (Working Days)</label>
            <lightning-input type="number" value={duration} onchange={handleDurationChange} min="0.5" step="0.5"
                class="form-field"></lightning-input>
        </div>

        <template if:false={showConfirmation}>
            <!-- Reason -->
            <label>Reason</label>
            <lightning-textarea value={reason} onchange={handleReasonChange} rows="3" class="form-field">
            </lightning-textarea>

            <!-- Action Buttons -->
            <div class="form-actions">
                <button class="btn-save" onclick={handleSave}>Save changes</button>
                <button class="btn-cancel" onclick={handleCancel}>Cancel</button>
            </div>
        </template>

        <!-- Confirmation View -->
        <template if:true={showConfirmation}>
            <div class="confirmation-section">
                <p class="confirm-text"><b>Confirm details:</b> {duration} day(s) {requestTypeLabel} from {startDate} to
                    {endDate}.</p>
                <div class="form-actions">
                    <button class="btn-confirm" onclick={handleConfirm}>✅ Confirm</button>
                    <button class="btn-cancel" onclick={handleBackToEdit}>✏️ Edit</button>
                </div>
            </div>
        </template>
    </div>
</template>